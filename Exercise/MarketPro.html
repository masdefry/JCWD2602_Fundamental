<script>
    // Step-01. Main Menu ---> Prompt
    // Step-01. Menu-01: Buy Item
    //          - Prompt untuk input produk yang akan dibeli
    //          - Prompt untuk input qty
    //          - Cek, apakah qty <= stock?
    //              - qty <= stock -----> Product add to cart
    //              - qty > stock  -----> User input qty ulang
    // Step-02. Menu-02: See Cart Item
    //          - Looping each item in array cart
    //          - show looping string with alert
    // Step-03. Menu-03: Checkout
    //          - Looping each item in array cart
    //              1. Show List Cart
    //              2. Get amount
    //          - Prompt untuk input cash user
    //          - Cek, apakah cash >= amount?
    //              - cash >= ammount -----> Transaction success
    //              - cash < ammount  -----> User input cash ulang
</script>

<!-- Database Products (Beda File) -->
<script src="Database.js"></script>
<script>
    // Main Menu
    do{
        var menu = Number(prompt(`1. Buy Item \n2. Cart \n3. Checkout`))

        if(menu === 1){
            // Masuk ke Menu: Buy Item
            // Step-01. Menu-01: Buy Item
                let listProduct = ''
                for(let i=0; i < dbProducts.length; i++){
                    listProduct += `${i+1}. ${dbProducts[i].name} (Stock: ${dbProducts[i].stock}) = Rp.${dbProducts[i].price.toLocaleString('id-ID')}/${dbProducts[i].unit} \n`
                }
                //          - Prompt untuk input produk yang akan dibeli
                const selectedProduct = Number(prompt(`Input Your Selected Item: \n${listProduct}`))-1
                //          - Prompt untuk input qty
                const qty = Number(prompt('Input Quantity of Product Selected:'))
                //          - Cek, apakah qty <= stock?
                //              - qty <= stock -----> Product add to cart
                //              - qty > stock  -----> User input qty ulang
                const stockSelectedProduct = dbProducts[selectedProduct].stock 

                // Makesure produk sudah di cart atau belum
                let qtyInCart = 0
                for(let i=0; i < dbCarts.length; i++){
                    console.log(dbCarts[i].name)
                    console.log(dbProducts[selectedProduct].name)
                    if(dbCarts[i].name === dbProducts[selectedProduct].name) qtyInCart += dbCarts[i].quantity
                }
                console.log(`Qty Input: ${qty}`)
                console.log(`Qty in Cart ${qtyInCart}`)
                console.log(`Stock ${stockSelectedProduct}`)
                if((qty + qtyInCart) >= stockSelectedProduct){
                    // Apabila qty melebihi stock, tampil alert
                    alert('Stock Product Tidak Mencukupi!')
                }else{
                    //  Apabila qty tidak melebihi stock, data products push ke cart
                    dbCarts.push({...dbProducts[selectedProduct], quantity: qty})
                }
        }else if(menu === 2){
            // Masuk ke Menu: Cart
        }else if(menu === 3){
            // Masuk ke Menu: Checkout
        }
    }while(menu < 3)
</script>